# Криминалистическое средство для анализа файловых версий ОС

## Введение

<p>В операционных системах семейства Microsoft Windows и macOS существуют специальные механизмы для сохранения версий файлов, бэкапов и снэпшотов системы</p>
<p>Для операционной системы macOS характерны следующие механизмы:</p>
<ul>
    <li>Time Machine - механизм сохранения снэпшотов системы</li>
    <li>DocumentRevisions - механизм сохранения файловых версий</li>
</ul>
<p>Для семейства операционных систем Microsoft Windows характерны следующие механизмы:</p>
<ul>
    <li>Бэкапы</li>
    <li>"История файлов" - механизм сохранения файловых версий (начиная с Windows 8)</li>
</ul>
<p>В ходе криминалистической экспертизы остаточную информацию в файлах можно найти в бэкапах или сохраненных версиях файлов</p>

## Описание

### Структура
<p>Программа состоит из трех отдельных утилит</p>
<ul>
    <li>version.py - утилита для выявления опции версионирования</li>
    <li>backups.py - утилита для выявления опции бэкапов</li>
    <li>file_version.py - утилита для сохранения выявленных файлов в отдельной директории (данные сохраняются в определенном формате)</li>
</ul>
<p>Утилита <i>file_version.py</i> сохраняет выгруженные данные в директории с инициализированным git</p>
<p>Ветки git представляют собой отдельные файлы с соответстующей временной диаграммой, а в ветке <b>master</b> сохраняются файлы бэкапов</p>
<p>С помощью <i>git log</i> можно посмотреть даты создания и модификации файлов</p>

### Использование
<p>Преполагаемый алгоритм работы:</p>
<ol>
    <li>Эксперт подключает диск с исследуемой операционной системой к системе</li>
    <li>С помощью утилиты <i>mount</i> или <i>apfs-fuse</i> эксперт монтирует систему к некоторой директории</li>
    <li>Эксперт выявляет опции версионирования или бэкапов с помощью утилит <i>version.py</i> или <i>backups.py</i></li>
    <li>Производится выгрузка данных с помощью утилиты <i>file_version.py</i> в некоторую директорию</li>
    <li>Выгруженные данные можно анализировать с помощью любого клиента git, в том числе и в CLI (например, GitKraken)</li>
</ol>

## Архитектура
<p>Для добавления новых ОС можно создавать классы в соответствующих директориях по пути <i>./src/{BackupVersionsModule, DetectModule, FileVersionsModule}</i></p>

## Идеи для дальнейшей разработки
<ul>
    <li>Разработка утилиты для определения файловой системы по сигнатурам</li>
    <li>Добавление опции в MacFileVersions для определения названия файла (это можно сделать через sqlite базу в директории macOS .DocumentRevisions-V100)</li>
    <li>Добавление новых механизмов (Например, TimeMachine)</li>
</ul>

